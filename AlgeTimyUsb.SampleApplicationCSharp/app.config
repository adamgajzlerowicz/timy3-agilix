<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.8"/>
  </startup>

  <!-- Runtime settings for better performance and stability -->
  <runtime>
    <!-- Enable server garbage collection for better performance in long-running applications -->
    <gcServer enabled="true"/>
    <!-- Allow concurrent garbage collection to reduce pauses -->
    <gcConcurrent enabled="true"/>
    <!-- Increase the minimum number of threads in the thread pool -->
    <ThreadPool minWorkerThreads="25" minCompletionPortThreads="25"/>
    <!-- Enable all TLS protocols for WebSocket connections -->
    <AppContextSwitchOverrides value="Switch.System.Net.DontEnableSchUseStrongCrypto=false;Switch.System.Net.DontEnableSystemDefaultTlsVersions=false"/>
  </runtime>

  <!-- Network settings -->
  <system.net>
    <!-- Connection management for better stability -->
    <connectionManagement>
      <!-- Increase the connection limit for localhost -->
      <add address="*" maxconnection="100"/>
    </connectionManagement>

    <!-- Settings for HTTP requests -->
    <settings>
      <httpWebRequest useUnsafeHeaderParsing="true" />
      <!-- Set socket settings for better stability -->
      <socket alwaysUseCompletionPortsForAccept="true" alwaysUseCompletionPortsForConnect="true"/>
      <!-- Service point manager settings -->
      <servicePointManager expect100Continue="false" useNagleAlgorithm="false" checkCertificateRevocationList="false"/>
    </settings>

    <!-- Default proxy settings -->
    <defaultProxy enabled="false" useDefaultCredentials="false">
      <proxy/>
      <bypasslist/>
      <module/>
    </defaultProxy>
  </system.net>

  <!-- Web settings -->
  <system.web>
    <httpRuntime enableVersionHeader="false" executionTimeout="3600" maxRequestLength="51200"/>
  </system.web>

  <!-- Application settings -->
  <appSettings>
    <!-- WebSocket server settings -->
    <add key="WebSocketPort" value="8087"/>
    <add key="WebSocketPath" value="/timy3"/>
    <add key="WebSocketKeepAliveInterval" value="30"/>
    <add key="WebSocketReceiveBufferSize" value="4096"/>

    <!-- Timy3 connection settings -->
    <add key="Timy3ReconnectDelay" value="1000"/>
    <add key="Timy3CommandTimeout" value="5000"/>

    <!-- Logging settings -->
    <add key="EnableDebugLogging" value="false"/>
    <add key="MaxLogEntries" value="1000"/>
  </appSettings>
</configuration>
